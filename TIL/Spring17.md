# ğŸ“Œ ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°± 1

## ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°± ì‹œì‘

- ë°ì´í„°ë² ì´ìŠ¤ ì»¤ë„¥ì…˜ í’€ì´ë‚˜ ë„¤íŠ¸ì›Œí¬ ì†Œì¼“ì²˜ëŸ¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ì‹œì ì— í•„ìš”í•œ ì—°ê²°ì„ ë¯¸ë¦¬í•´ë‘ê³  ì¢…ë£Œì‹œì ì— ëª¨ë‘ ì¢…ë£Œí•˜ëŠ” ì‘ì—…ì„ ì§„í–‰í•˜ë ¤ë©´, ê°ì²´ì˜ ì´ˆê¸°í™”ì™€ ì¢…ë£Œ ì‘ì—…ì´ í•„ìš”í•˜ë‹¤.

<br>

> ìŠ¤í”„ë§ ë¹ˆì˜ ë¼ì´í”„ ì‚¬ì´í´

- ê°ì²´ ìƒì„± -> ì˜ì¡´ê´€ê³„ ì£¼ì…
- ìƒì„±ì ì£¼ì…ì˜ ê²½ìš° ì˜ˆì™¸ì„, ê°ì²´ìƒì„±ê³¼ ì£¼ì…ì„ í•¨ê»˜í•˜ë‹ˆê¹!
- ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ì™„ë£Œë˜ë©´ ìŠ¤í”„ë§ ë¹ˆì—ê²Œ ì½œë°± ë©”ì„œë“œë¥¼ í†µí•´ ì´ˆê¸°í™” ì‹œì ì„ ì•Œë ¤ì£¼ëŠ” ë‹¤ì–‘í•œ ê¸°ëŠ¥ ì œê³µ
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ì¢…ë£Œë˜ê¸° ì§ì „ì— ì†Œë©¸ ì½œë°±ì„ ì£¼ê¸°ë„í•œë‹¤.

<br>

> ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë²¤íŠ¸ ë¼ì´í”„ì‚¬ì´í´

1) ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±
2) ìŠ¤í”„ë§ ë¹ˆ ìƒì„±
3) ì˜ì¡´ê´€ê³„ ì£¼ì…
4) ì´ˆê¸°í™” ì½œë°±
5) ì‚¬ìš©
6) ì†Œë©¸ì „ ì½œë°±
7) ìŠ¤í”„ë§ ì¢…ë£Œ

- ì´ˆê¸°í™” ì½œë°± : ë¹ˆì´ ìƒì„±ë˜ê³ , ë¹ˆì˜ ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ì™„ë£Œëœ í›„ í˜¸ì¶œ
- ì†Œë©¸ì „ ì½œë°± : ë¹ˆì´ ì†Œë©¸ë˜ê¸° ì§ì „ì— í˜¸ì¶œ

<BR>

> ê°ì²´ì˜ ìƒì„±ê³¼ ì´ˆê¸°í™”ë¥¼ ë¶„ë¦¬í•´ì•¼í•œë‹¤.

- ìƒì„±ìëŠ” í•„ìˆ˜ ì •ë³´(íŒŒë¼ë¯¸í„°)ë¥¼ ë°›ê³ , ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•´ì„œ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ì±…ì„ì„ ê°€ì§„ë‹¤.
- ë°˜ë©´ì— ì´ˆê¸°í™”ëŠ” ì´ë ‡ê²Œ ìƒì„±ëœ ê°’ë“¤ì„ í™œìš©í•´ì„œ ì™¸ë¶€ ì»¤ë„¥ì…˜ì„ ì—°ê²°í•˜ëŠ”ë“± ë¬´ê±°ìš´ ë™ì‘ì„ ìˆ˜í–‰í•œë‹¤
- ìƒì„±ì ì•ˆì—ì„œ ë¬´ê±°ìš´ ì´ˆê¸°í™” ì‘ì—…ì„ í•¨ê»˜ í•˜ëŠ” ê²ƒ ë³´ë‹¤ëŠ” ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ë¶€ë¶„ê³¼ ì´ˆê¸°í™” í•˜ëŠ” ë¶€ë¶„ì„ ëª…í™•í•˜ê²Œ ë‚˜ëˆ„ëŠ” ê²ƒì´ ìœ ì§€ë³´ìˆ˜ ê´€ì ì—ì„œ ì¢‹ë‹¤

<br>

> ìŠ¤í”„ë§ì€ í¬ê²Œ 3ê°€ì§€ ë°©ë²•ìœ¼ë¡œ ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°±ì„ ì§€ì›í•œë‹¤.

- ì¸í„°í˜ì´ìŠ¤(InitializingBean, DisposableBean)
- ì„¤ì • ì •ë³´ì— ì´ˆê¸°í™” ë©”ì„œë“œ, ì¢…ë£Œë©”ì„œë“œ ì§€ì •
- @PostConstruct, @PreDestroy ì• ë…¸í…Œì´ì…˜ ì§€ì›

#### ì¸í„°í˜ì´ìŠ¤ InitializingBean, DisposableBean

```java
package spring.core.lifecycle;

import org.springframework.beans.factory.DisposableBean;
import org.springframework.beans.factory.InitializingBean;

public class NetworkClient implements InitializingBean, DisposableBean {
    private String url;

    public NetworkClient() {
        System.out.println("ìƒì„±ì í˜¸ì¶œ, url = " + url);
    }

    public void setUrl(String url) {
        this.url = url;
    }

    //ì„œë¹„ìŠ¤ ì‹œì‘ì‹œ í˜¸ì¶œ
    public void connect() {
        System.out.println("connect: " + url);
    }

    public void call(String message) {
        System.out.println("call: " + url + " message = " + message);
    }

    //ì„œë¹„ìŠ¤ ì¢…ë£Œì‹œ í˜¸ì¶œ
    public void disConnect() {
        System.out.println("close + " + url);
    }

    @Override
    public void afterPropertiesSet() throws Exception {
        connect();
        call("ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€");
    }

    @Override
    public void destroy() throws Exception {
        disConnect();
    }
}
```

<br>

- InitializingBeanì€ afterPropertiesSet() ë©”ì„œë“œë¡œ ì´ˆê¸°í™”ë¥¼ ì§€ì›í•œë‹¤.
- DisposableBeanì€ destroy() ë©”ì„œë“œë¡œ ì†Œë©¸ì„ ì§€ì›í•œë‹¤.

> ì´ˆê¸°í™”, ì†Œë©¸ ì¸í„°í˜ì´ìŠ¤ ë‹¨ì 

- ì´ ì¸í„°í˜ì´ìŠ¤ëŠ” ìŠ¤í”„ë§ ì „ìš© ì¸í„°í˜ì´ìŠ¤ë‹¤. í•´ë‹¹ ì½”ë“œê°€ ìŠ¤í”„ë§ ì „ìš© ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•œë‹¤.
- ì´ˆê¸°í™”, ì†Œë©¸ ë©”ì„œë“œì˜ ì´ë¦„ì„ ë³€ê²½í•  ìˆ˜ ì—†ë‹¤.
- ë‚´ê°€ ì½”ë“œë¥¼ ê³ ì¹  ìˆ˜ ì—†ëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ì ìš©í•  ìˆ˜ ì—†ë‹¤.

<br>

> ë¹ˆ ë“±ë¡ ì´ˆê¸°í™”, ì†Œë©¸ ë©”ì„œë“œ ì§€ì •

- ì„¤ì • ì •ë³´ì— @Bean(initMethod = "init", destroyMethod = "close") ì²˜ëŸ¼ ì´ˆê¸°í™”, ì†Œë©¸ ë©”ì„œë“œë¥¼ ì§€ì •í•  ìˆ˜ ìˆë‹¤.

<br>

> ì„¤ì • ì •ë³´ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½

```java
package spring.core.lifecycle;

public class NetworkClient {
    private String url;

    public NetworkClient() {
        System.out.println("ìƒì„±ì í˜¸ì¶œ, url = " + url);
    }

    public void setUrl(String url) {
        this.url = url;
    }

    //ì„œë¹„ìŠ¤ ì‹œì‘ì‹œ í˜¸ì¶œ
    public void connect() {
        System.out.println("connect: " + url);
    }

    public void call(String message) {
        System.out.println("call: " + url + " message = " + message);
    }

    //ì„œë¹„ìŠ¤ ì¢…ë£Œì‹œ í˜¸ì¶œ
    public void disConnect() {
        System.out.println("close + " + url);
    }

    public void init() {
        System.out.println("NetworkClient.init");
        connect();
        call("ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€");
    }

    public void close() {
        System.out.println("NetworkClient.close");
        disConnect();
    }
}
```

<br>

> ì„¤ì • ì •ë³´ì— ì´ˆê¸°í™” ì†Œë©¸ ë©”ì„œë“œ ì§€ì •

```java
@Configuration
static class LifeCycleConfig {
    @Bean(initMethod = "init", destroyMethod = "close")
    public NetworkClient networkClient() {
        NetworkClient networkClient = new NetworkClient();
        networkClient.setUrl("http://hello-spring.dev");
        return networkClient;
    }
}
```

<br>

> ì„¤ì • ì •ë³´ ì‚¬ìš© íŠ¹ì§•
- ë©”ì„œë“œ ì´ë¦„ì„ ììœ ë¡­ê²Œ ì¤„ ìˆ˜ ìˆë‹¤.
- ìŠ¤í”„ë§ ë¹ˆì´ ìŠ¤í”„ë§ ì½”ë“œì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ”ë‹¤.
- ì½”ë“ ì•„ë‹ˆë¼ ì„¤ì • ì •ë³´ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì½”ë“œë¥¼ ê³ ì¹ ìˆ˜ ì—†ëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ë„ ì´ˆê¸°í™”, ì¢…ë£Œë©”ì„œë“œë¥¼ ì ìš©í•  ìˆ˜ ìˆë‹¤.


> ì¢…ë£Œ ë©”ì„œë“œ ì¶”ë¡ 
- @Beanì˜ destroyMethod ì†ì„±ì—ëŠ” ì•„ì£¼ íŠ¹ë³„í•œ ê¸°ëŠ¥ì´ ìˆë‹¤.
- ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ëŒ€ë¶€ë¶„ close , shutdown ì´ë¼ëŠ” ì´ë¦„ì˜ ì¢…ë£Œ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•œë‹¤
- @Beanì˜ destroyMethod ëŠ” ê¸°ë³¸ê°’ì´ (inferred) (ì¶”ë¡ )ìœ¼ë¡œ ë“±ë¡ë˜ì–´ ìˆë‹¤.
- ì´ ì¶”ë¡  ê¸°ëŠ¥ì€ close , shutdown ë¼ëŠ” ì´ë¦„ì˜ ë©”ì„œë“œë¥¼ ìë™ìœ¼ë¡œ í˜¸ì¶œí•´ì¤€ë‹¤. ì´ë¦„ ê·¸ëŒ€ë¡œ ì¢…ë£Œ ë©”ì„œë“œë¥¼ ì¶”ë¡ í•´ì„œ í˜¸ì¶œí•´ì¤€ë‹¤.

ğŸ‘‰ ì°¸ì¡° : [ì¸í”„ëŸ°](https://www.inflearn.com/)ì˜ **ê¹€ì˜í•œë‹˜**ê°•ì˜


<br>
ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

<br>

**ê°œì¸ë©”ëª¨**

